{"code":"__filename=\"/Users/ddraper005/eff/backend/services/shared/src/db/DbClient.ts\";(()=>{\nvar __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var DbClient_exports={};__export(DbClient_exports,{DbClient:()=>DbClient});module.exports=__toCommonJS(DbClient_exports);class DbClient{static{__name(this,\"DbClient\")}factory;info;_connected=false;constructor(factory,info){this.factory=factory;this.info=info}async connect(){if(this._connected&&this.factory.isConnected())return;await this.factory.connect(this.info);this._connected=this.factory.isConnected();if(!this._connected){throw new Error(\"[DbClient] factory reported not connected after connect()\")}}async ensure(){if(!this._connected||!this.factory.isConnected()){await this.connect()}}async getDb(dbName){await this.ensure();return this.factory.getDb(dbName??this.info.dbName)}async getCollection(name,dbName){await this.ensure();return this.factory.getCollection(name,dbName??this.info.dbName)}async close(){await this.factory.close();this._connected=false}isConnected(){return this._connected&&this.factory.isConnected()}}0&&(module.exports={DbClient});\n})()\n","warnings":[],"map":{"version":3,"mappings":";suBAAA,yHAeO,MAAM,QAAS,CAftB,MAesB,yBACH,QACA,KACT,WAAa,MAErB,YAAY,QAAqB,KAAyB,CACxD,KAAK,QAAU,QACf,KAAK,KAAO,IACd,CAKA,MAAa,SAAyB,CACpC,GAAI,KAAK,YAAc,KAAK,QAAQ,YAAY,EAAG,OACnD,MAAM,KAAK,QAAQ,QAAQ,KAAK,IAAI,EACpC,KAAK,WAAa,KAAK,QAAQ,YAAY,EAC3C,GAAI,CAAC,KAAK,WAAY,CACpB,MAAM,IAAI,MACR,2DACF,CACF,CACF,CAKA,MAAc,QAAwB,CACpC,GAAI,CAAC,KAAK,YAAc,CAAC,KAAK,QAAQ,YAAY,EAAG,CACnD,MAAM,KAAK,QAAQ,CACrB,CACF,CAKA,MAAa,MAAM,OAAmC,CACpD,MAAM,KAAK,OAAO,EAClB,OAAO,KAAK,QAAQ,MAAM,QAAU,KAAK,KAAK,MAAM,CACtD,CAKA,MAAa,cACX,KACA,OACkB,CAClB,MAAM,KAAK,OAAO,EAClB,OAAO,KAAK,QAAQ,cAAiB,KAAM,QAAU,KAAK,KAAK,MAAM,CACvE,CAKA,MAAa,OAAuB,CAClC,MAAM,KAAK,QAAQ,MAAM,EACzB,KAAK,WAAa,KACpB,CAKO,aAAuB,CAC5B,OAAO,KAAK,YAAc,KAAK,QAAQ,YAAY,CACrD,CACF","names":[],"ignoreList":[],"sources":["/Users/ddraper005/eff/backend/services/shared/src/db/DbClient.ts"],"sourcesContent":[null]}}